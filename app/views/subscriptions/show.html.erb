<section class="plans">
  <div class="plans__wrap">
    <h1 class="plans__title">Manage Membership</h1>
    <div class="plans__content" data-controller="plans-toggle" data-plans-toggle-interval-value="<%= @interval %>">
      <p><strong>Congratulations for planning on travelling the coolest way possible!</strong></p>
      <p>We came up with a <strong>sliding scale membership plan</strong> to meet you wherever you are in your financial situation. No money should not be a reason to not travel, but sadly, it does need money to make this platform work.</p>
      <p>If you <strong>really can't afford</strong> the membership fee, please reach out to us - <strong>we will try our best to make it work.</strong></p>
      <p class="plans__note">Please note: <em>to browse profiles and/or be a host</em>, you do <em>not</em> need a membership plan - still, at this point, we <em>deeply appreciate any extra support.</em></p>
      <%= render 'partials/switch_button', interval: @interval %>
      <% if @interval == 'year' %>
        <div class="plans__lists">
          <ul class="plans__list" data-plans-toggle-target="year">
            <% @yearly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
          <ul class="plans__list display-none" data-plans-toggle-target="month">
            <% @monthly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
          <ul class="plans__list display-none" data-plans-toggle-target="sixmonths">
            <% @six_monthly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
        </div>
      <% elsif @interval == 'month' %>
        <div class="plans__lists">
          <ul class="plans__list display-none" data-plans-toggle-target="year">
            <% @yearly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
          <ul class="plans__list display-none" data-plans-toggle-target="sixmonths">
            <% @six_monthly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
          <ul class="plans__list" data-plans-toggle-target="month">
            <% @monthly.each do |plan| %>
              <li class="plans__list-item">
                <div class="plans__list-item__wrap">
                  <i class="quouch-stack color-secondary" aria-label="Stack icon"></i>
                  <div>
                    <h3><%= plan.name %></h3>
                    <p class="plans__price"><%= number_to_currency((plan.price_cents / 100.0) / 6, unit: 'â‚¬', separator: ',', delimiter: '.') %><span class="plans__price-interval">/month</span></p>
                  </div>
                </div>
                <p class="plans__description"><%= plan.description %></p>
                <% if @subscription.end_of_period %>
                  <p class="plans__info">
                    <i class="quouch-info-circle color-secondary" aria-label="Info icon"></i>
                    <em>You can subscribe to this plan once your current plan has ended.</em>
                  </p>
                <% else %>
                  <p class="plans__info">
                    <i class="quouch-info-circle color-secondary" aria-label="Info icon"></i>
                    <em>To subscribe to a new plan, please ensure to cancel your current plan before its billing cycle ends. If not cancelled, it will automatically renew. Once the billing cycle has ended, you can choose a different plan.</em>
                  </p>
                <% end %>
              </li>
            <% end %>
          </ul>
        </div>
      <% elsif @interval == 'six_months' %>
        <div class="plans__lists">
          <ul class="plans__list display-none" data-plans-toggle-target="year">
            <% @yearly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
          <ul class="plans__list" data-plans-toggle-target="sixmonths">
            <% @six_monthly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
           <ul class="plans__list display-none" data-plans-toggle-target="month">
            <% @monthly.each do |plan| %>
              <%= render 'partials/plan', plan: %>
            <% end %>
          </ul>
        </div>
      <% end %>
    </div>
    <p class="plans__addition">Please bear in mind that subscribing to a membership plan does <strong>not guarantee</strong> you a successful stay with Quouch. We only provide access to the Quouch community. The best advise for a successful experience is a friendly profile and kind, personal messages. For more information, check our <strong><%= link_to 'safety advice', safety_path %></strong> and <strong><%= link_to 'guidelines', guidelines_path %></strong>.</p>
  </div>
</section>
